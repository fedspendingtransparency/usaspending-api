{
  "final_name": "summary_view",
  "matview_sql": [
    "SELECT",
    "  \"transaction_normalized\".\"action_date\",",
    "  \"transaction_normalized\".\"fiscal_year\",",
    "  \"awards\".\"type\",",
    "  \"transaction_fpds\".\"pulled_from\",",
    "",
    "  TAA.\"toptier_agency_id\" AS awarding_toptier_agency_id,",
    "  TFA.\"toptier_agency_id\" AS funding_toptier_agency_id,",
    "  SAA.\"subtier_agency_id\" AS awarding_subtier_agency_id,",
    "  SFA.\"subtier_agency_id\" AS funding_subtier_agency_id,",
    "  TAA.\"name\" AS awarding_toptier_agency_name,",
    "  TFA.\"name\" AS funding_toptier_agency_name,",
    "  SAA.\"name\" AS awarding_subtier_agency_name,",
    "  SFA.\"name\" AS funding_subtier_agency_name,",
    "  TAA.\"abbreviation\" AS awarding_toptier_agency_abbreviation,",
    "  TFA.\"abbreviation\" AS funding_toptier_agency_abbreviation,",
    "  SAA.\"abbreviation\" AS awarding_subtier_agency_abbreviation,",
    "  SFA.\"abbreviation\" AS funding_subtier_agency_abbreviation,",
    "",
    "  SUM(\"transaction_normalized\".\"federal_action_obligation\") AS \"federal_action_obligation\",",
    "  COUNT(*) AS counts",
    "FROM",
    "  \"transaction_normalized\"",
    "INNER JOIN",
    "  \"awards\" ON (\"transaction_normalized\".\"award_id\" = \"awards\".\"id\")",
    "LEFT OUTER JOIN",
    "  \"transaction_fpds\" ON (\"transaction_normalized\".\"id\" = \"transaction_fpds\".\"transaction_id\")",
    "LEFT OUTER JOIN",
    "  \"agency\" AS AA ON (\"transaction_normalized\".\"awarding_agency_id\" = AA.\"id\")",
    "LEFT OUTER JOIN",
    "  \"agency\" AS FA ON (\"transaction_normalized\".\"funding_agency_id\" = FA.\"id\")",
    "LEFT OUTER JOIN",
    "  \"toptier_agency\" AS TAA ON (AA.\"toptier_agency_id\" = TAA.\"toptier_agency_id\")",
    "LEFT OUTER JOIN",
    "  \"toptier_agency\" AS TFA ON (FA.\"toptier_agency_id\" = TFA.\"toptier_agency_id\")",
    "LEFT OUTER JOIN",
    "  \"subtier_agency\" AS SAA ON (AA.\"subtier_agency_id\" = SAA.\"subtier_agency_id\")",
    "LEFT OUTER JOIN",
    "  \"subtier_agency\" AS SFA ON (FA.\"subtier_agency_id\" = SFA.\"subtier_agency_id\")",
    "WHERE",
    "  \"transaction_normalized\".\"action_date\" >= '2007-10-01'",
    "GROUP BY",
    "  \"transaction_normalized\".\"action_date\",",
    "  \"transaction_normalized\".\"fiscal_year\",",
    "  \"awards\".\"type\",",
    "  \"transaction_fpds\".\"pulled_from\",",
    "",
    "  TAA.\"toptier_agency_id\",",
    "  TFA.\"toptier_agency_id\",",
    "  SAA.\"subtier_agency_id\",",
    "  SFA.\"subtier_agency_id\",",
    "  TAA.\"name\",",
    "  TFA.\"name\",",
    "  SAA.\"name\",",
    "  SFA.\"name\",",
    "  TAA.\"abbreviation\",",
    "  TFA.\"abbreviation\",",
    "  SAA.\"abbreviation\",",
    "  SFA.\"abbreviation\""
  ],
  "indexes": [
    {
      "name": "action_date",
      "columns": [{"name": "\"action_date\"", "order": "DESC NULLS LAST"}]
    },{
      "name": "type",
      "columns": [{"name": "\"type\""}]
    },{
      "name": "fy",
      "columns": [{"name": "\"fiscal_year\"", "order": "DESC NULLS LAST"}]
    },{
      "name": "pulled_from",
      "where": "\"pulled_from\" IS NOT NULL",
      "columns": [{"name": "\"pulled_from\""}]
    }
  ]
}
