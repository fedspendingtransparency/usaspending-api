{
  "final_name": "summary_award_view",
  "matview_sql": [
    "SELECT",
    "  \"transaction_normalized\".\"action_date\",",
    "  \"transaction_normalized\".\"fiscal_year\",",
    "  \"awards\".\"type\",",
    "  \"transaction_fpds\".\"pulled_from\",",
    "  \"awards\".\"category\",",
    "",
    "  TAA.name AS awarding_toptier_agency_name,",
    "  TAA.abbreviation AS awarding_toptier_agency_abbreviation,",
    "  TFA.name AS funding_toptier_agency_name,",
    "  TFA.abbreviation AS funding_toptier_agency_abbreviation,",
    "  SAA.name AS awarding_subtier_agency_name,",
    "  SAA.abbreviation AS awarding_subtier_agency_abbreviation,",
    "  SFA.name AS funding_subtier_agency_name,",
    "  SFA.abbreviation AS funding_subtier_agency_abbreviation,",
    "  SUM(\"transaction_normalized\".\"federal_action_obligation\") AS \"federal_action_obligation\",",
    "  COUNT(*) counts",
    "FROM",
    "  \"awards\"",
    "LEFT OUTER JOIN",
    "  \"transaction_normalized\" ON (\"awards\".\"latest_transaction_id\" = \"transaction_normalized\".\"id\")",
    "LEFT OUTER JOIN",
    "  \"transaction_fpds\" ON (\"awards\".\"latest_transaction_id\" = \"transaction_fpds\".\"transaction_id\")",
    "LEFT OUTER JOIN",
    "  \"agency\" AS AA ON (\"transaction_normalized\".\"awarding_agency_id\" = AA.\"id\")",
    "LEFT OUTER JOIN",
    "  \"agency\" AS FA ON (\"transaction_normalized\".\"funding_agency_id\" = FA.\"id\")",
    "LEFT OUTER JOIN",
    "  \"toptier_agency\" AS TAA ON (AA.\"toptier_agency_id\" = TAA.\"toptier_agency_id\")",
    "LEFT OUTER JOIN",
    "  \"toptier_agency\" AS TFA ON (FA.\"toptier_agency_id\" = TFA.\"toptier_agency_id\")",
    "LEFT OUTER JOIN",
    "  \"subtier_agency\" AS SAA ON (AA.\"subtier_agency_id\" = SAA.\"subtier_agency_id\")",
    "LEFT OUTER JOIN",
    "  \"subtier_agency\" AS SFA ON (FA.\"subtier_agency_id\" = SFA.\"subtier_agency_id\")",
    "WHERE",
    "  \"transaction_normalized\".action_date >= '2007-10-01'",
    "GROUP BY",
    "  \"transaction_normalized\".\"action_date\",",
    "  \"transaction_normalized\".\"fiscal_year\",",
    "  \"awards\".\"type\",",
    "  \"transaction_fpds\".\"pulled_from\",",
    "  \"awards\".\"category\",",
    "  TAA.name,",
    "  TAA.abbreviation,",
    "  TFA.name,",
    "  TFA.abbreviation,",
    "  SAA.name,",
    "  SAA.abbreviation,",
    "  SFA.name,",
    "  SFA.abbreviation"
  ],
  "indexes": [
    {
      "name": "action_date",
      "columns": [{"name": "\"action_date\"", "order": "DESC NULLS LAST"}]
    },{
      "name": "type",
      "columns": [{"name": "\"type\""}]
    },{
      "name": "fy",
      "columns": [{"name": "\"fiscal_year\"", "order": "DESC NULLS LAST"}]
    },{
      "name": "pulled_from",
      "where": "\"pulled_from\" IS NOT NULL",
      "columns": [{"name": "\"pulled_from\""}]
    }
  ]
}
